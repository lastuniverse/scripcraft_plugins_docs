<!-- TITLE: expchange -->
<!-- SUBTITLE: описание плагина `expchange` -->

# Плагин магазина опыта

[video](https://gaming.youtube.com/watch?v=lSwU19j5Mtc&feature=share){.youtube}


## Возможности:
- позволяет игрокам устанавливать таблички-обменники, позволяющие менять опыт на деньги и обратно
- имеет набор команд позволяющих манипулировать опытом

## Команды:
`/exp help` : эта справка.
`/exp` : узнать сколько у вас экспы.
`/exp now` : то же самое что и ***/exp***.
`/exp reset` : обнулить себе экспу.
`/exp give {playername} {exp}` : установить игроку ***{playername}*** експу в ***{exp}*** (только если игрок в онлайне).
`/exp set {amount} {procent}` : создать магазаин опыта, из таблички на которую смотрит игрок. Где ***{count}*** количество обмениваемого опыта/игровых монет, ***{procent}*** - количество опыта/игровых монет взымаемых за использование таблички в пользу хозяина магазина.

## Файл конфигурации data/config/plugins/last/expchange.json
```js
{
    "locale": "ru_ru",                // Язык по умолчанию `ru_ru`
    "enable": true,                   // Включить/выключить плагин `true`/`false`

}
```

## Настройки разрешений для плагина `expchange` 

**Права доступа:** *могут быть выставленны персонально для разных групп и отдельных пользователей*
```js
...
"permissions": {
    "last_expchange.use":     false,     // разрешение на использование таких команд как /exp reset
    "last_expchange.admin":   false,     // разрешение на использование таких команд как /exp give
    "last_expchange.set":     false      // разрешение на установку магазинов опыта с помощью команды `/exp set ...`
}
...
```

**Параметры:** *могут быть выставленны персонально для разных групп и отдельных пользователей*
```js
...
"options": {
    // данный плагин не имеет групповых и/или персональных настроек
}
...
```

## Файлы локализации (поддерживаются модулем [modules/last/localses](/modules/locales) )

Файлы локализации плагина находятся в папке `scriptcraft/data/locales/plugins/last/last_expchange`. Вы можете создавать свои собственные файлы с локализациями под разные языки, и менять локализованные сообщения в уже существующих файлах.

Пример файла локализации для русского языка `scriptcraft/data/locales/plugins/last/last_expchange/ru_ru.json`
```json
{
    "msg": {
        "cmd_exp_now": "У вас ${exp} экспы.",
        "cmd_exp_reset": "Вы обнулили свою експу.",
        "cmd_exp_give": "Вы добавили комуто ${exp} экспы.",
        "procenage": "Вам капнул процент (${coins} ${coins_name}) от ${player}!",
        "change_exp": "Вы обменяли ${coins} ${coins_name} на ${exp} экспы.",
        "change_coins": "Вы обменяли ${exp} экспы на ${coins} ${coins_name}.",
        "none_coins": "У вас не хватает ${coins_name} чтобы купить экспу!",
        "none_exp": "У вас нехватает экпы.",
        "not_sign": "Вы смотрите не на табличку!",
        "create_success": "Магазин опыта успешно создан!"
    },
    "coins": ["коин","коина","коинов"],
    "help": [
        "/exp help : эта справка\n",
        "/exp : узнать сколько у вас экспы\n",
        "/exp now : то же самое что и /exp\n",
        "/exp reset : обнулить себе экспу\n",
        "/exp give {playername} {exp} : установить игроку {playername} експу в {exp} (только если игрок в онлайне, доступна только главному админу)\n",
        "/exp set {amount} {procent} : создать магазаин опыта, из таблички на которую смотрит игрок. {count} количество обмениваемого опыта/игровых монет, {procent} - количество опыта/игровых монет взымаемых за использование таблички в пользу хозяина магазина\n"
    ]
}
```
## Важно
Курс обмена - единицы опыта приравниваются 1 единице игровых денег. Такое соотношение заложено в модуле [expfix](/modules/expfix).

## Зависимости:
> - utils - стандартный модуль ScriptCraft
> - signs - стандартный модуль ScriptCraft
> - [modules/last/signs](/modules/signs)       - модуль, предоставляет интерфейс, для установки слушателей на события 
> - [modules/last/users](/modules/users)       - модуль доступа к персональному хранилищу данных пользователей
> - [modules/last/economy](/modules/economy)     - модуль управления экономикой и финансами игрока
> - [modules/last/expfix](/modules/expfix)     - модуль реализующий пересчет опыта в деньги и обратно, а также правильную установку количества опыта у игроков, после совершения операций, расходующих или прибавляющих опыт
> - [modules/last/locales](/modules/locales)     - модуль локализации
> - [modules/last/completer](/modules/completer)   - модуль регистрации команд /jsp commandname как глобальных команд /commandname с возможностью автодополнения
> - [modules/last/permissions](/modules/permissions) - модуль управления правами доступа к функционалц прагинов для пользователей и групп пользователей

