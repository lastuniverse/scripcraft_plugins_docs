<!-- TITLE: аdminshop -->
<!-- SUBTITLE: описание плагина `adminshop` -->

# Плагин админских бездонных магазинов
Плагин позволяет создавать бездонные магазины (без сундука).
По сути, магазин это табличка на которой указаны:
 1. строка - тип магазина `adminshop`
 2. строка - цена покупки, количесвно товара цена продажи `100 < 1 > 400`
 3. строка - пустая
 4. строка - текстовый идентификатор товара `ELYTRA`

Торговля происходит в виде удаления/добавления содержимого в инвентарь игрока в обмен на игровые деньги. 
 
## Команды
 - `/adminshop help` : эта справка
 - `/adminshop set {count}` : создать из таблички на которую смотрите магазин для товара который держите в руке в колличестве {count}
 - `/adminshop set {count} {product}` : создать из таблички на которую смотрите магазин для товара {product} в колличестве {count}
 - `/adminshop amount {count}`  : изменить клоличество товара для действующей табличке админшопа на новое, казанное в {count}

## Установка магазинов
Для установки такого магазина
 - установить пустую табличку
 - взять в руки предмет, которым должен торговать магазин
 - навести курсор на табличку
 - ввести команду `/adminshop set {count}` : создать из таблички на которую смотрите магазин для товара который держите в руке в колличестве {count}. При этом будет установленна следующая цена товара:
   - цена продажи = `count` * `basecost` * `2`
   - цена покупки = `count` * `basecost` * `0.5`
где `basecost` - это базовая цена на конкретный товар, взятая из модуля [economy](/modules/economy)
     
## Использование магазинов
  - ЛКМ - для продажи указанного количества товара по указаной цене 
  - ПКМ - для покупки указанного количества товара по указаной цене 

## Файл конфигурации data/config/plugins/last/adminshop.json
```js
{
    "locale": "ru_ru",                // Язык по умолчанию `ru_ru`
    "enable": true,                   // Включить/выключить плагин `true`/`false`
}
```

## Настройки разрешений для плагина `adminshop` 

**Права доступа:** *могут быть выставленны персонально для разных групп и отдельных пользователей*
```js
...
"permissions": {
    "last_adminshop.admin":     true     // разрешение на установку админских магазинов
}
...
```

**Параметры:** *могут быть выставленны персонально для разных групп и отдельных пользователей*
```js
...
"options": {
	"last_adminshop.sell": 200   // цена продажи в процентах от базовой цены товара
	"last_adminshop.buy": 50    // цена покупки в процентах от базовой цены товара
}
...
```
## Важно:
***В настоящий момент магазин умеет торговать следующими видами товаров:***
 - все обычные товары
 - чареные вещи (страндартные уровни зачарования)
 - книги зачарования
 - именованные товары

***Товары с которыми предвижу проблемы:***
 - раскрашенные флаги (при торговле слетит раскраска, останется только базовый цвет)
 - раскрашенные фейрверки (при торговле слетит раскраска, останется только базовый цвет)
 - книги с текстом (превратятся в пустые книги)
 - карты (станут пустыми)
 - зелья (даже не представляю что с ними будет :)
 - яйца призыва (даже не представляю что с ними будет :)
 - возможно другие блоки и предметы содержащие особы свойства
 
## Зависимости:
 - utils - стандартный модуль ScriptCraft
 - [modules/last/eventex](/modules/eventex)     - экземпляр класса EventEmmiter созданный для межмодульного взаимодействия через вызовы событий
 - [modules/last/completer](/modules/completer)   - модуль регистрации команд /jsp commandname как глобальных команд /commandname с возможностью автодополнения
 - [modules/last/economy](/modules/economy)     - модуль экономики
 - [modules/last/signs](/modules/signs)       - модуль событий связанных с табличками
 - [modules/last/users](/modules/users)       - модуль для централизованного хранения данных пользователя с кэшированием для более быстрого доступа
 - [modules/last/timetools](/modules/timetools)   - модуль для работы со таймером
 - [modules/last/locales](/modules/locales)     - модуль локализации
 - [modules/last/inventory](/modules/last/inventory)   - модуль работы с инвентарем и материалами
