<!-- TITLE: Магазины -->
<!-- SUBTITLE: Описание плагина Магазинов -->

# Плагин магазинов и гипермагазинов
**plugins/last/last_chestshop**

Позволяет создавать 3 типа магазинов:
- `shop`   - *самый обычный магазин (табличка на сундуке). Торговля происходит в виде обмена содержимым между инвентарем игрока и инвентарем сундука на который установленна табличка. На табличке указаны хозяин и тип магазина (1 строка), количество товара (2 строка), цена покупки и продажи (3 строка), наименование товара (4 строка)*
- `store`  - *все также как и для `shop`, но имеет свое уникальное (среди всех store игрока) название.*
- `hyper`  - *выносная табличка интерфейс для `store`, каждый `store` может иметь несколько таких табличек, каждая может быть со своей ценой и количеством товара*
             

## Установка магазинов
 
**Для установки магазинов типа `shop` необходимо:**
 - поставить сундук или сундук ловушку
 - в первую ячейку положить 1 или более едениц товара которым должен торговать данный магазин
 - установить на сундук табличку с надписями:

|Текст на табличке|
|:---------------:|
|`shop` </br> `{buy} {amount} {sell}` </br> [оставить пустой] </br> [оставить пустой]|

Где:
- `{buy}` - цена скупки
- `{amount}` - количество товара меняемого за 1 клик
- `{sell}` - цена продажи
4-я строка будет заполнена автоматически названием товара лежащим в первой ячейке.

**Для установки магазинов типа `store` необходимо:**
 - поставить сундук или сундук ловушку
 - в первую ячейку положить 1 или более едениц товара которым должен торговать данный магазин
 - установить на сундук табличку с надписями:

|Текст на табличке|
|:---------------:|
|`store` </br> `{buy} {amount} {sell}` </br> `{store_name}` </br> [оставить пустой]|

Где:
- `{buy}` - цена скупки
- `{amount}` - количество товара меняемого за 1 клик
- `{sell}` - цена продажи
- `{store_name}` - уникальное наименование данного `store` среди всех установленных игроком `store`
4-я строка будет заполнена автоматически названием товара лежащим в первой ячейке.

**Для установки магазинов типа `hyper` необходимо:**
 - установить именованный `store`
 - установить на любой блок табличку с надписями:

|Текст на табличке|
|:---------------:|
|`hyper` </br> `{buy} {amount} {sell}` </br> `{store_name}` </br> [оставить пустой]|

Где:
- `{buy}` - цена скупки
- `{amount}` - количество товара меняемого за 1 клик
- `{sell}` - цена продажи
- `{store_name}` - уникальное наименование одного из `store` установленных игроком `store`
2-я строка будет заполнена автоматически если оставить ее пустой, возмет данные от привязанного `store`.
4-я строка будет заполнена автоматически названием товара из указаного `store`.
 
## Использование магазинов
 - ЛКМ - для продажи указанного количества товара по указаной цене 
 - ПКМ - для покупки указанного количества товара по указаной цене 

## Важно
 
**В настоящий момент магазин умеет торговать следующими видами товаров:**
 - все обычные товары
 - чареные вещи
 - книги зачарования
 - именованные товары
 
**Товары с которыми предвижу проблемы:**
 - раскрашенные флаги (при торговле слетит раскраска, останется только базовый цвет)
 - раскрашенные фейрверки (при торговле слетит раскраска, останется только базовый цвет)
 - книги с текстом (превратятся в пустые книги)
 - карты (станут пустыми)
 - зелья (даже не представляю что с ними будет :)
 - яйца призыва (даже не представляю что с ними будет :)
 - а также товары содержащие следующие типы 

## зависимости:
> - utils - стандартный модуль ScriptCraft
> - modules/last/eventex     - экземпляр класса EventEmmiter созданный для межмодульного взаимодействия через вызовы событий
> - modules/last/completer   - модуль регистрации команд /jsp commandname как глобальных команд /commandname с возможностью автодополнения
> - modules/last/economy     - модуль экономики
> - modules/last/signs       - модуль событий связанных с табличками
> - modules/last/users       - модуль для централизованного хранения данных пользователя с кэшированием для более быстрого доступа
> - modules/last/locales     - модуль локализации
> - modules/last/inventory   - модуль работы с инвентарем и материалами