<!-- TITLE: Кланы -->
<!-- SUBTITLE: Кланы игроков проекта «LostTerra» -->

*здесь и далее я излагаю свое видение того, как может быть организована система кланов. Andsoon.*

*Обсуждение изложенного здесь ведется в нашей [группе вконтакте](https://vk.com/topic-143014612_35741860)*

# Общие данные

Игроки проекта «Lost Terra» могут объединяться в кланы для совместной игры и ведения совместной хозяйственной деятельности. Участники делают взносы в казну клана, взамен получая доступ к ресурсам клана. Так же кланы могут вступать в клановые войны с целью захвата чужого имущества, либо обороны своего.

В одно время один игрок может состоять только в одном клане, либо не состоять ни в одном.

# Управление кланом

## Создание клана

Для создания клана игрок, желающий стать основателем клана, не состоящий ни в одном клане в данный момент, приобретает свиток создания клана, отыскивает в игре не менее чем троих игроков-единомышленников, так же не состоящих ни в одном клане, и запускает процесс создания клана.

Свиток создания клана содержит внутри себя команду следующего вида: `/clan create {clanname}`, где параметр `{clanname}` можно задавать например переименованием свитка на наковальне. Имя клана должно быть уникальным и не совпадать ни с одним из имен другого клана на сервере.

После использования свитка (либо команды на этапе альфа-тестирования) система выводит игроку-основателю клана следующее сообщение:

> Вы собираетесь создать клан {clanname} . Для завершения создания клана вам надо пригласить еще {x} участников.

В этот момент технически клан уже создан, но не активирован. Для завершения процедуры создания клана игроку-основателю нужно пригласить в создаваемый клан еще по крайней мере троих (на этапе альфа-тестирования одного) игроков. Подробнее в главе [добавление игроков в клан](#добавление-игроков-в-клан).

Игроку основателю после каждого успешно вступившего участника на этом этапе высвечивается дополнительное сообщение:
>«Для завершения создания клана вам надо пригласить еще {x} участников.»

Как только все необходимые участники вступят в новый клан, клан считается созданным и на весь мир объявляется следующее сообщение:
>«Создан новый клан! Попривествуетм клан {clanname}!»

## Внутриклановые ранги

Все игроки, состоящие в клане делятся на следующие группы доступа к командам управления кланом:
- участник
- руководитель
- основатель

Участник имеет только базовый набор полномочий по управлению кланом.

Руководитель може то же, что и участник, а так же имеет доступ к распоряжению казной клана, приему либо отчислению участников клана.

Основатель может тоже что и руководитель, а так же может переименовывать клан и назначать либо снимать руководителей.

## Управление кланом

### Переименование клана

Для переименования клана используется команда `/clan rename {new_clanname}`, где `{new_clanname}` - новое имя клана. Имя клана должно быть уникальным и не совпадать ни с одним из имен другого клана на сервере. Процедура смены имени клана стоит определенной суммы денег, списываемых из казны клана, а так же накладывает определенные штрафы, которых не будет на альфа-тестировании, но будут продуманы и добавлены к бета-тестированию.

### Добавление игроков в клан

Добавлять новых участников в клан могут только основатель и руководители клана.

Для того, чтобы пригласить игрока в клан следует использовать команду `/clan invite {playername}`, где `{playername}` - имя приглашаемого игрока.

Приглашение может отправляться только игроку, не состоящему в данный момент ни в каком клане.

Игрок, которуму отправляется приглашение на вступление в клан получат в чат сообщение следующего вида:
>Игрок {playername} приглашает вас вступить в клан {clanname}. Для вступления в клан введите /clan join {clanname}.

Руководитель или основатель клана может просматривать текущий перечень разосланных приглашений на вступление в клан при помощи команды `/clan invitelist {page}`, где `{page}` - номер страницы перечня от начала. Перечень выводится по 10 записей.

Руководитель или основатель клана может отменить приглашение на вступление в клан при помощи команды `/clan inviteсancel {playername}`, где `{playername}` имя игрока, чьё приглашение должно быть отменено.

Если игрок согласен принять приглашение, он использует команду `/clan join {clanname}`, где `{clanname}` - название того клана, в который игрок хочет вступить. Игрок может иметь неограниченное количество приклашений в разные кланы. В случае вступления игроком в какой-либо из кланов все остальные приглашения, полученные им, сгорают.

Игрок, не получавший приглашения в клан, так же может использовать команду `/clan join {clanname}`. В таком случае команда будет трактоваться как подача заявки на вступление в клан под названием `{clanname}`.

Руководитель или основатель клана может просматривать текущий перечень активных заявок при помощи команды `/clan joinlist {page}`, где `{page}` - номер страницы перечня от начала. Перечень выводится по 10 записей.

Руководитель или основатель клана может принимать заявки на вступление в клан при помощи той же команды `/clan invite {playername}`, при этом игрок по имени `{playername}`, подававший ранее заявку на вступление сразу принимается в клан.

Руководитель или основатель клана может отклонять заявки на вступление в клан при помощи той же команды `/clan inviteсancel {playername}`.

Принятый игрок по-умолчанию получает ранг участника. Когда игрок присоединяется к клану, всем участникам клана высвечивается сообщение:
> «Игрок {playername} присоединился к клану {clanname}.»

### Изменение ранга игрока

Для назначения нового руководителя из числа участников клана используется команда `/clan promote {playername}`, где `{playername}` - имя игрока получающего повышение.

Для поражения руководителя в правах до участника клана используется команда `/clan demote {playername}`, где `{playername}` - имя игрока увольняемого с должности.

### Удаление игроков из клана

Любой игрок, состоящий в клане может в любой момент выйти из него при помощи команды `/clan leave`. Если из клана выходит основатель, то должность основателя переходит к одному из игроков-руководителей клана. К кому именно выбирается случайным образом. Если на момент выхода основателя в клане нет ни одного руководителя, то должность основателя переходит к одному из оставшихся участников клана. К кому именно выбирается случайным образом. Если на момент выхода основателя в клане не остается ни одного руководителя и ни одного участника клан удаляется а всё его имущество переходит в собственность администрации проекта «LostTerra».

Руководитель или основатель клана может изгонять участников из клана при помощи команды `/clan banish {playername}`. Ни основатель, ни один из руководителей не могут быть изгнаны из клана при помощи этой команды. Если основатель желает изгнать из клана одного из руководителей клана, ему надо предварительно понизить этого руководителя в статусе до участника, при помощи команды `/clan demote {playername}`.

## Общение в клане

Для всех игроков состоящих в клане действует клановый чат. Сообщения, отправленные в клановый чат видят только игроки состоящие в одном клане. Для того чтобы отправить сообщение в клановый чат необходимо использовать команду: `/cl [текст сообщения]`.

Руководитель или основатель клана может устанавливать сообщение дня клана, которое может быть использовано как доска объявлений клана. Каждый игрок состоящий в клане при каждом заходе на сервер получает в чат сообщение дня от клана. Устанавливается текст сообщения командой `/clan textoftheday [текст сообщения]`

Любой игрок состоящий в клане может выводить себе в чат информацию о клане, в котором состоит при помощи команды `/clan info {page}`. В чат выводится информация о названии клана, его уровне, размерах ежедневного и процентного платежей, а так же перечень игроков состоящих в этом клане.Здесь `{page}` - номер страницы перечня от начала. Перечень выводится по 10 записей. 

# Казна клана

У клана есть общая казна, выражаемая в игровой валюте. Казна клана пополняется из взносов игроков состоящих в клане. Взносы могут делаться как на добровольной основе, так и обязательно. Обязательные взносы выплачиваются только игроками-участниками клана. Основатель и руководители клана от уплаты обязательных взносов освобождены и делают взносы только на добровольной основе.

Руководители или основатель клана могут устанавливать размеры ежедневных и процентных обязательных взносов, выплачиваемых в казну клана игроками участниками. В том числе размеры этих взносов могут быть установлены равными нулю.

## Добровольные взносы

Игрок состоящий в клане может делать добровольный взнос в общак клана при помощи команды `/clan pay {count}` при этом количество игровыой валюты равное `{count}` переводится со счета игрока в казну клана. `{count}` не может быть меньше нуля и округляется вниз до ближайшего целого.

Если за игроком, делающим добровольный взнос значится задолженность по ежедневным взносам, величина взноса вычитается из размера задолженности. Если величина задолженности после этого становится меньшей либо равной нулю, игрок исключается из списка должников.

## Ежедневные взносы

Ежедневный взнос - взнос фикисированного размера списываемый один раз в день со счетов всех игроков-участников клана в пользу казны клана. Величину этого взноса могут задавать основатель либо руководители клана при помощи команды `/clan seteverydaypayment {count}`, где `{count}` - величина ежедневного взноса.

Если на момент списания ежедневного взноса у игрока на счету нет необходимой суммы, формируется задожденность, которую игрок в последствии может погасить при помощи добровольного пожертвования.

Руководители или основатель клана могут просматривать перечень должников при помощи команды `/clan debtorlist {page}`, где `{page}` - номер страницы перечня от начала. Перечень выводится по 10 записей. На основании размеров задолженностей руководители или основатель клана могут делать выводы о необходимости исключения игрока из клана, либо применения к нему иных мер воздействия.

## Процентные взносы

Процентный взнос - взнос уплачиваемый игроком участником клана при каждой покупке совершаемой за игровую валюту. Например при ставке процентного взноса в 1% игрок участник, совершив покупку в магазине на 100 монет выплатит 101, из которых 100 монет уйдет продавцу, а 1 - в казну клана.

Величину этого взноса могут задавать основатель либо руководители клана при помощи команды `/clan setpercent {count}`, где `{count}` процент взымаемый кланом с каждой операции игрока участника.

# Имущество клана

## Субприваты в городах

## Клановые замки

## Шахты

## Фермы мобов

## НПС

## Бафы

# Развитие клана

## Уровень клана

## Репутация клана

# Взаимоотношения между кланами

## Союзы кланов

## Войны кланов

## Осада замка

# Полный перечень команд

Команда | Параметры | Описание
:-------|:----------|:----------
`/cl`|`[текст сообщения]`| Выводит `[текст сообщения]` в чат всем игрокам состоящим в одном клане. 
`/clan banish`|`{playername}`| Изгоняет из клана игрока-участника по имени `{playername}`. При использовании команды проверяется чтобы игрок использующий данную команду состоял в каком-либо клане и имел в нем ранг руководителя либо основателя. Команда не изгоняет игрока из клана, если его ранг в клане руководитель или основатель.
`/clan create`|`{clanname}`| Создает новый клан с названием `{clanname}`.  При использовании команды проверяется чтобы игрок использующий данную команду не состоял в данный момент ни в одном клане. Новый клан создается неактивным до завершения всей процедуры создания клана.
`/clan debtorlist`|`{page}`|  Выводит перечень имен игроков, имеющих задолженность по ежедневным взносам и размеры этих задолженностей. При использовании команды проверяется чтобы игрок использующий данную команду состоял в каком-либо клане и имел в нем ранг руководителя либо основателя.
`/clan demote`|`{playername}`| Понижает руководителя клана по имени `{playername}` в должности до участника. При использовании команды проверяется чтобы игрок использующий данную команду состоял в каком-либо клане и имел в нем ранг основателя.
`/clan info`|`{page}`| Выводит в чат информацию о клане. При использовании команды проверяется чтобы игрок использующий данную команду состоял в каком-либо клане.
`/clan invite`|`{playername}`| Приглашает в клан игрока по имени `{playername}`, либо если от этого игрока уже есть заявка на вступление принимает его в клан. При использовании команды проверяется чтобы игрок использующий данную команду состоял в каком-либо клане и имел в нем ранг руководителя либо основателя.
`/clan inviteсancel`|`{playername}`| Отменяет отправленное ранее приглашение на вступление в клан игроку `{playername}`, либо отклоняет поданную им заявку на вступление.
`/clan invitelist`|`{page}`| Выводит перечень имен игроков, получивших приглашение в клан. При использовании команды проверяется чтобы игрок использующий данную команду состоял в каком-либо клане и имел в нем ранг руководителя либо основателя. 
`/clan join`|`{clanname}`| Подаёт заявку на вступление, либо принимает поступившее приглашение на вступление в клан под названием `{clanname}`. При использовании команды проверяется чтобы игрок использующий данную команду не состоял в данный момент ни в одном клане.
`/clan joinlist`|`{page}`| Выводит перечень имен игроков, подавших заявку на вступление в клан. При использовании команды проверяется чтобы игрок использующий данную команду состоял в каком-либо клане и имел в нем ранг руководителя либо основателя.
`/clan leave`|| Выводит игрока из клана, в котором он состоит. При использовании команды проверяется чтобы игрок использующий данную команду состоял в каком-либо клане.
`/clan promote`|`{playername}`|Повышает игрока по имени `{playername}` из числа участников клана до руководителя. При использовании команды проверяется чтобы игрок использующий данную команду состоял в каком-либо клане и имел в нем ранг основателя.
`/clan rename`|`{new_clanname}`| Изменяет имя клана. При использовании команды проверяется чтобы игрок использующий данную команду состоял в каком-либо клане и имел в нем ранг основателя. При использовании команды проверяется чтобы игрок использующий данную команду состоял в каком-либо клане и имел в нем ранг руководителя либо основателя.
`/clan seteverydaypayment`|`{count}`| Устанавливает величину ежедневного денежного взноса в казну клана.
`/clan setpercent`|`{count}`| Устанавливает величину процента, взымаемого в казну клана с каждой операции игрока-участника.
`/clan textoftheday`|`[текст сообщения]`| Устанавливает сообщение дня, выводимое каждому игроку, состоящему в этом клане при каждом его входе на сервер.